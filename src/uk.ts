import * as h3 from "h3-js";

const RES = 3;

export const boundingCoordinates = [
  [30, 40],
  [30, 60.991681562135454],
  [-30, 60.991681562135454],
  [-30, 40],
  [30, 40],
];

export const boundingWorld1 = [
  [-180, 90],
  [-180, -90],
  [0, -90],
  [0, 90],
  [-180, 90],
];
export const boundingWorld2 = [
  [0, 90],
  [0, -90],
  [180, -90],
  [180, 90],
  [0, 90],
];

const boundingCoords3 = [
  [-6.563568839949227, 52.228270388257016],
  [-6.063123393366482, 53.12471989282031],
  [-6.2678510760589745, 53.82868455810714],
  [-5.471687865585949, 54.36227410830949],
  [-6.199608515161913, 55.227758309562546],
  [-7.200499408328653, 55.058748064423696],
  [-6.950276685037267, 55.2796175398916],
  [-7.314237009824609, 55.35727955977228],
  [-8.383370463889719, 55.058748064423696],
  [-8.497108065385675, 54.81044367550183],
  [-8.815573349575402, 54.600154489174656],
  [-8.201390301495422, 54.58697519662087],
  [-8.656340707480553, 54.28267292685368],
  [-9.884706803640512, 54.29595048807005],
  [-10.089434486333005, 53.94934097579869],
  [-9.634484080347846, 53.74805334672655],
  [-10.13492952693187, 53.478162132654745],
  [-9.06579607286676, 53.111067503441575],
  [-10.29416216902672, 52.15854949236146],
  [-10.203172087828932, 51.76608915730998],
  [-9.384261357056516, 51.39858003543995],
  [-6.563568839949227, 52.18645097296758],
];

const boundingCoords2 = [
  [-5.630920507680798, 50.07420502073509],
  [-5.130475061096803, 49.927990269465624],
  [-4.7437672160100135, 50.30722424487567],
  [-3.765623843141441, 50.21997527764319],
  [-3.1286932747632648, 50.611337968905985],
  [-2.1505499018959426, 50.56801283554739],
  [-0.8994362854365647, 50.611337968905985],
  [-0.48998092005030003, 50.741074237373226],
  [0.9431128588021238, 50.87045206286032],
  [1.6255384677804727, 51.29912704247178],
  [1.3070731835907168, 51.511976402948164],
  [0.7611326964090495, 51.497817260312786],
  [1.0568504602993585, 51.76608915730998],
  [1.716528548976953, 52.130630510337426],
  [1.8075186301734902, 52.63049806852288],
  [1.4435583053861478, 52.905761029881916],
  [0.6019000543142283, 53.015379341367804],
  [0.2606872498250823, 52.823364833642984],
  [0.05595956713131045, 52.892039195799924],
  [0.3516773310215626, 53.111067503441575],
  [0.12420212802965125, 53.54579671401518],
  [0.10145460773020432, 53.70767960925744],
  [-0.2170106764595232, 54.00285429897329],
  [-0.05777803436464524, 54.216220898257006],
  [-0.6719610824446249, 54.53421536857965],
  [-1.1724065290273984, 54.66598699934926],
  [-1.4453767726182036, 55.266659076100865],
  [-1.9458222192022276, 55.80728255388814],
  [-2.5372577469827604, 56.049414273141736],
  [-3.242430876259249, 55.99856486299478],
  [-3.060450713864924, 56.17624503349009],
  [-2.741985429675225, 56.2142127891685],
  [-2.560005267282179, 56.34050077868113],
  [-2.8102279905735372, 56.42865442570445],
  [-2.036812300398708, 57.05240976046505],
  [-1.6955994959108125, 57.48290146002171],
  [-1.9685697395016462, 57.641519304809776],
  [-3.4471585589529354, 57.690185888506875],
  [-4.08408912733114, 57.580594200512365],
  [-3.833866404039753, 57.823682571529474],
  [-3.833866404039753, 57.992875213871315],
  [-3.0149556732672806, 58.36468816106637],
  [-2.5372577469827604, 59.15507702313732],
  [-3.105945754463818, 59.32957559514696],
  [-3.6518862416454567, 58.63804346110041],
  [-4.6072820942145825, 58.555073603552444],
  [-5.039484979900266, 58.62620267165644],
  [-5.244212662592787, 58.269108482537746],
  [-5.471687865585949, 58.02902719567041],
  [-5.721910588877364, 57.811566879444825],
  [-5.881143230972157, 57.32359178748004],
  [-5.7446581091767825, 56.99049956320823],
  [-6.040375873067035, 56.70438261560392],
  [-5.539930426483039, 56.453803721341956],
  [-5.585425467081905, 56.2142127891685],
  [-5.676415548278442, 55.615055680116],
  [-5.7446581091767825, 55.266659076100865],
  [-5.517182906183621, 55.29257177568269],
  [-5.335202743790518, 55.7944968431309],
  [-4.902999858104863, 55.7944968431309],
  [-4.766514736309432, 55.52502585290503],
  [-5.175970101695697, 54.9151797654315],
  [-4.971242419001953, 54.71857630549363],
  [-4.220574249126571, 54.73171298470072],
  [-3.2879259168581427, 54.95438569077152],
  [-3.5836436807483665, 54.58697519662087],
  [-3.2879259168581427, 54.09633730329014],
  [-3.060450713864924, 53.437529557289224],
  [-3.9476040055357373, 53.32898584666688],
  [-4.3798068912214205, 53.36972216692931],
  [-4.675524655111701, 53.26100544951859],
  [-4.357059370921974, 53.015379341367804],
  [-4.812009776907104, 52.80961691875714],
  [-3.9930990461346028, 52.83710840026322],
  [-4.175079208528899, 52.283968394477256],
  [-5.312455223491099, 51.87857139607192],
  [-5.107727540797384, 51.63921077242938],
  [-4.31156433032433, 51.653325943418395],
  [-4.01584656643405, 51.52613114614289],
  [-3.3334209574557576, 51.39858003543995],
  [-2.423520145486748, 51.69564509223912],
  [-3.105945754463818, 51.19945811256778],
  [-3.902108964938094, 51.22795699382044],
  [-4.53903953331627, 50.92783834958507],
  [-5.653668027980245, 50.11798275123178],
];

const points = [
  [-2.162840525325123, 53.45226016422555],
  [-2.426998718883425, 53.58548905354107],
  [-2.04296575867437, 53.69289146791661],
  [-1.672192947253194, 53.55216910134911],
  [-1.8003205109404234, 53.30269811635088],
  [-2.2482401145890094, 53.222829742742164],
  [-0.17309299179356685, 51.50737598233357],
  [0.17947078511775771, 51.743086037683696],
  [-0.430830096707183, 51.839566580014434],
  [0.06424026989620302, 51.232234187137436],
  [-0.946036020074672, 51.42713073395129],
  [-4.589304092216764, 48.402395431570994],
  [-2.2742298494555087, 47.288600658338],
  [-2.7287889460130828, 47.60316070303912],
  [-4.251026387982336, 48.043211887435376],
  [-3.532192554622185, 47.96541061060739],
];

const selection = points.map((point) =>
  h3.latLngToCell(point[1], point[0], RES)
);

export const polygons = h3.polygonToCells(boundingWorld1, RES, true);
console.log(polygons);
export const polygons3 = h3.polygonToCells(boundingWorld2, RES, true);

let id = 2;
export const data = {
  type: "GeometryCollection",
  geometries: [
    ...selection
      .map((polygon) => h3.cellToBoundary(polygon, true))
      .map((coords) => ({
        type: "Polygon" as const,
        coordinates: [coords.reverse()],
        properties: {
          id: ++id % 100,
        },
      })),
    // ...polygons
    //   .map((polygon) => h3.cellToBoundary(polygon, true))
    //   .map((coords) => ({
    //     type: "Polygon" as const,
    //     coordinates: [coords.reverse()],
    //     properties: {
    //       id: ++id % 100,
    //     },
    //   })),
    // ...polygons3
    //   .map((polygon) => h3.cellToBoundary(polygon, true))
    //   .map((coords) => ({
    //     type: "Polygon" as const,
    //     coordinates: [coords.reverse()],
    //     properties: {
    //       id: ++id % 100,
    //     },
    //   })),
  ],
};
console.log(data);
